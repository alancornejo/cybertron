function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Errors=function(){function t(){_classCallCheck(this,t),this.errors={}}return _createClass(t,[{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"clear",value:function(t){if(t)return void delete this.errors[t];this.errors={}}},{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"record",value:function(t){this.errors=t}}]),t}(),Form=function(){function t(e){_classCallCheck(this,t),this.originalData=e;for(var a in e)this[a]=e[a];this.errors=new Errors}return _createClass(t,[{key:"data",value:function(){var t={};for(var e in this.originalData)t[e]=this[e];return t}},{key:"post",value:function(t){return this.submit("post",t)}},{key:"put",value:function(t){return this.submit("put",t)}},{key:"patch",value:function(t){return this.submit("patch",t)}},{key:"reset",value:function(){for(var t in this.originalData)this[t]="";this.errors.clear()}},{key:"submit",value:function(t,e){var a=this;return new Promise(function(r,o){axios[t](e,a.data()).then(function(t){r(t.data)}).catch(function(t){a.onFail(t.response.data),$("#topcontrol").click(),o(t.response.data)})})}},{key:"onFail",value:function(t){this.errors.record(t)}}]),t}(),ubigeoID="",extras=!1,vmDatosPersonales=new Vue({el:"#datosPersonales",data:{selectedD:null,selectedP:null,selectedDi:null,typeDocument:null,typeLicense:null,maritalStatus:null,departamento:[],provincia:[],distrito:[],oldDepartamento:"",oldProvincia:"",form:new Form({Names:"",lastName:"",Departamento:"",Provincia:"",Distrito:"",nameAddress:"",numberTelephone:"",numberMobile:"",Email:"",Document:"",numberDocument:"",License:"",numberLicense:"",Marital:"",numberChildren:"",dateBirthday:""})},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;axios.post("viewProfile").then(function(e){t.form.Names=e.data[0].name,t.form.lastName=e.data[0].last_name,t.loadDepartamento();var a=e.data[0].users_information;a&&(t.form.nameAddress=a.address,t.form.numberTelephone=a.phone_home,t.form.numberMobile=a.phone_mobile,t.form.Email=a.email,t.form.Document=a.identity,t.form.numberDocument=a.identity_number,t.form.License=a.license,t.form.numberLicense=a.license_number,t.form.Marital=a.marital_status,t.form.numberChildren=a.children_number,t.form.dateBirthday=a.datebirthday,ubigeoID=a.ubigeo_id,extras=!0,t.$nextTick(function(){t.loadSelect(),t.loadExtra()}))}).catch(function(t){})},loadDepartamento:function(){var t=this;axios.post("viewDepartamento").then(function(e){var a=[];objectToArray(e.data,a,"departamento"),t.departamento=a}).catch(function(t){})},loadProvincia:function(t){var e=this;null===t&&(this.form.Departamento=null,this.form.Provincia=null,this.form.Distrito=null),this.oldDepartamento!=t&&(this.selectedP=""),this.form.Departamento=t;var a={Departamento:t};axios.post("viewProvincia",a).then(function(t){var a=[];objectToArray(t.data,a,"provincia"),e.provincia=a}).catch(function(t){})},loadDistrito:function(t){var e=this;this.oldProvincia!=t&&(this.selectedDi=""),this.form.Provincia=t;var a={Provincia:t};axios.post("viewDistrito",a).then(function(t){var a=[];objectToArray(t.data,a,"distrito"),e.distrito=a}).catch(function(t){})},getDistrito:function(t){this.form.Distrito=t},loadSelect:function(){var t=this,e={idUbigeo:ubigeoID};axios.post("viewUbigeo",e).then(function(e){e.data[0]&&(t.oldDepartamento=e.data[0].departamento,t.selectedD=e.data[0].departamento,t.oldProvincia=e.data[0].provincia,t.selectedP=e.data[0].provincia,t.selectedDi=e.data[0].distrito)}).catch(function(t){})},loadExtra:function(){extras&&(this.typeDocument=this.form.Document.toUpperCase(),this.typeLicense=this.form.License,this.maritalStatus=CharUpper(this.form.Marital))},getDocument:function(t){this.form.Document=t.toLowerCase()},getLicense:function(t){this.form.License=t},getMarital:function(t){this.form.Marital=t.toLowerCase()},onSubmit:function(){var t=this;$(".btnPersonales").html('<i class="fa fa-spin fa-spinner"></i> Cargando'),this.form.post("/profile/saveDatos").then(function(e){t.loadData(),vmProfile.loadProfile(),$(".btnPersonales").html('<i class="fa fa-save"></i> Guardar Cambios'),alertaSimple("","TÃºs Datos Personales se editaron correctamente","success")}).catch(function(t){$(".btnPersonales").html('<i class="fa fa-save"></i> Guardar Cambios'),alertaSimple("","No completaste los campos correctamente o</br>Ha ocurrido un problema<br>Comunicarse con los especialistas","error","4000")})}}});singleDate("dateBirthday"),$("input[name=dateBirthday]").on("apply.daterangepicker",function(t,e){vmDatosPersonales.form.dateBirthday=e.startDate.format("YYYY-MM-DD")});